---
title: "Flutterã§PDFã®ãƒšãƒ¼ã‚¸æ•°ã‚’ç¢ºèªã—ãŸã„ã ã‘"
emoji: "ğŸ“‘"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["flutter", "å€‹äººé–‹ç™º"]
published: true
---

# PDFã®ãƒšãƒ¼ã‚¸æ•°ã‚’ç¢ºèªã—ãŸã„

Flutterã§ã‚¢ãƒ—ãƒªé–‹ç™ºä¸­ã€èª­ã¿è¾¼ã‚“ã PDFã®ãƒšãƒ¼ã‚¸æ•°ã‚’ç¢ºèªã—ãŸã„ã ã‘ãªã®ã«ãˆã‚‰ãæ™‚é–“ãŒã‹ã‹ã£ã¦ã—ã¾ã£ãŸã®ã§ãƒ¡ãƒ¢ã€‚

# é–‹ç™ºç’°å¢ƒ

- Flutter
  - ver 3.10.6
  - Flutter for Web ã‚’åˆ©ç”¨

# ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒãŸãã•ã‚“ã‚ã‚‹

PDFç³»ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒãªãœã‹ãŸãã•ã‚“ã‚ã‚Šã¾ã™ã€‚
çµè«–ã¨ã—ã¦ã¯ [pdfx](https://pub.dev/packages/pdfx) ã§ã‚„ã‚ŠãŸã„ã“ã¨ãŒã§ãã¾ã—ãŸã€‚

- **ä½¿ã£ã¦ã¿ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒª**

  - [pdf](https://pub.dev/packages/pdf)
  - [printing](https://pub.dev/packages/printing)
  - [pdf_render](https://pub.dev/packages/pdf_render)
  - [native_pdf_renderer](https://pub.dev/packages/native_pdf_renderer) â€»pdfxã«ãƒªãƒ—ãƒ¬ãƒ¼ã‚¹
  - [native_pdf_view](https://pub.dev/packages/native_pdf_view) â€»pdfxã«ãƒªãƒ—ãƒ¬ãƒ¼ã‚¹
  - [**pdfx**](https://pub.dev/packages/pdfx)

- **ä½¿ã‚ãªã‹ã£ãŸã‘ã©èª¿ã¹ã¦å‡ºã¦ããŸãƒ©ã‚¤ãƒ–ãƒ©ãƒª**
  - [advance_pdf_viewer](https://pub.dev/packages/advance_pdf_viewer)
  - [syncfusion_flutter_pdfviewer](https://pub.dev/packages/syncfusion_flutter_pdfviewer)
  - [flutter_full_pdf_viewer](https://pub.dev/packages/flutter_full_pdf_viewer)
  - [flutter_pdfview](https://pub.dev/packages/flutter_pdfview)

# ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒåˆ†ã‹ã‚Šã«ãã„

ç§ã®çŸ¥è­˜ä¸è¶³ã‚‚ã‚ã‚Šã¾ã™ãŒã€ã©ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒåˆ†ã‹ã‚Šã«ãã„ã¨æ€ã„ã¾ã™ã€‚
åˆ©ç”¨ä¾‹ã‚’ã‚‚ã†ã¡ã‚‡ã£ã¨å¢—ã‚„ã—ã¦ã»ã—ã„ã€‚ã€‚ã€‚

[pdfã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](https://pub.dev/documentation/pdf/latest/pdf/pdf-library.html) ãªã©ã€ã¡ã‚‡ã£ã¨åˆ†ã‹ã‚Šã«ãã„ã€‚
[**pdfx**ã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](https://pub.dev/documentation/pdfx/latest/) ã¯åˆ†ã‹ã‚Šã‚„ã™ã„ã§ã™ã€‚

# Flutter for Webã§ã†ã¾ãã„ã‹ãªã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã‚ã‚‹

ãƒ–ãƒ©ã‚¦ã‚¶ã¯**ä»»æ„ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®èª­ã¿è¾¼ã¿ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„**ã‚‰ã—ãã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã‚’ç›´æ¥æŒ‡å®šã™ã‚‹ã‚¿ã‚¤ãƒ—ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯é¿ã‘ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚

pdfãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ–‡è„ˆã¨ã¯é•ã„ã¾ã™ãŒã€ã“ã¡ã‚‰ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’å‚è€ƒã«ã—ã¦ã¾ã™ã€‚

https://github.com/flutter/flutter/issues/98208

> ãƒ–ãƒ©ã‚¦ã‚¶ã¯ä»»æ„ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®èª­ã¿è¾¼ã¿ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„ãŸã‚ã€ãƒ–ãƒ©ã‚¦ã‚¶ã§å‹•ä½œã—ãªã„ã®ã¯ç‰¹ã«MutlipartFile.fromPathã§ã‚ã‚‹ã€‚
> ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã€ãƒã‚¤ãƒˆã¾ãŸã¯æ–‡å­—åˆ—ã¨ã—ã¦åˆ©ç”¨ã§ãã‚‹å ´åˆã¯ã€MultipartFile.fromStringã¾ãŸã¯MultipartFile.fromBytesã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚

([è¨˜äº‹](https://github.com/flutter/flutter/issues/98208)ã‹ã‚‰ã®å¼•ç”¨ã‚’Chat-GPTã«ã‚ˆã‚Šå’Œè¨³)

# pdfxã‚’ä½¿ã£ã¦ã¿ã‚‹

[**pdfx**](https://pub.dev/packages/pdfx)ã§é€²ã‚ã¾ã™ãŒã„ãã¤ã‹æ³¨æ„ãŒã‚ã‚Šã¾ã™ã€‚

## Webã§åˆ©ç”¨ã™ã‚‹å ´åˆã¯åˆ¥é€”ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡ŒãŒå¿…è¦ã§ã™ã€‚

Flutter for webã§é–‹ç™ºã—ã¦ã„ã‚‹æ™‚ã¯ `flutter pub run pdfx:install_web` ã®å®Ÿè¡ŒãŒå¿…è¦ãªã®ã§å¿˜ã‚Œãªã„ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚

> ### Getting Started
>
> In your flutter project add the dependency:
>
> ```
> flutter pub add pdfx
> ```
>
> For web run tool for automatically add pdfjs library (CDN) in index.html:
>
> ```
> flutter pub run pdfx:install_web
> ```
>
> For windows run tool automatically add override for pdfium version property in CMakeLists.txt file:
>
> ```
> flutter pub run pdfx:install_windows
> ```

([pdfx](https://pub.dev/packages/pdfx)ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚‰å¼•ç”¨)

## pdfController ã§ã¯ã†ã¾ãã„ã‹ãªã„

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¯ `pdfController.pagesCount` ã§ç·ãƒšãƒ¼ã‚¸æ•°ã‚’å–å¾—ã™ã‚‹ã‚ˆã†æ›¸ã‹ã‚Œã¦ã„ã¾ã™ãŒã€ã†ã¾ãã„ãã¾ã›ã‚“ã§ã—ãŸã€‚ï¼ˆãªãœï¼‰

ä»£ã‚ã‚Šã«å¤ã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ›¸ãæ–¹ã§ã‚ã‚‹ `docFromData.pagesCount` ã§ã†ã¾ãå–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚

## pdfxã‚’ä½¿ã£ãŸPDFã®ãƒšãƒ¼ã‚¸æ•°å–å¾—ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã§PDFã®ç·ãƒšãƒ¼ã‚¸æ•°ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```dart
PdfDocument docFromData = await PdfDocument.openData(file.bytes);
final pdfPagesCount = docFromData.pagesCount
```

ç§ã®ã‚¢ãƒ—ãƒªã§ã¯ `_pickPDF()` ã¨ã„ã†é–¢æ•°ã®ä¸­ã§ã“ã‚“ãªæ„Ÿã˜ã§ä½¿ã£ã¦ãŠã‚Šã¾ã™ã€‚

```dart
Future<void> _pickPDF() async {
  FilePickerResult? result = await FilePicker.platform.pickFiles(
    type: FileType.custom,
    allowedExtensions: ['pdf'],
  );

  if (result == null || result.files.isEmpty) return;
  PlatformFile file = result.files.first;
  PdfDocument docFromData = await PdfDocument.openData(file.bytes!);

  if (docFromData.pagesCount >= _maxPageCount) {
    if (!mounted) return;
    ScaffoldMessenger.of(context).showSnackBar(
      SnackBar(
          content: Text('$_maxPageCount ãƒšãƒ¼ã‚¸ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚'),
          backgroundColor: Colors.blueGrey),
    );
    return;
  }
  setState(() {
    _pickedFileName = file.name;
    _pickedFileBytes = file.bytes;
  });
}
```

# ã¾ã¨ã‚

- PDFç³»ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚ã‚Šéã & ã¡ã‚‡ã£ã¨ä½¿ã„ã«ãã„
- [**pdfx**](https://pub.dev/packages/pdfx) ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒåˆ†ã‹ã‚Šã‚„ã™ã„ï¼
- [**pdfx**](https://pub.dev/packages/pdfx) ã‚’ä½¿ãŠã†ï¼

èª°ã‹ã®å‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚
